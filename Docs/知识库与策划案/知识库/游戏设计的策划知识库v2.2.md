# 游戏设计的策划知识库 v2.2

> **面向**：策划 AI / 人类策划  
> **依据**：《游戏生成的需求知识库 v2.2》《00_项目基础规范》《验收与口径》（0 章与 UI 清单以 00 为准，首版与术语以验收与口径为准）。  
> **使用场景**：编写与审核策划案、确保策划文档符合标准、指导游戏系统与 UI 设计。

---

## 更新记录 (Changelog)

- **v2.2 (2026-01-30)**:
  - 新增"**UI系统整体架构**"章节（第0.6节），明确定义UI界面层级、全局导航体系、交互流程。
  - 更新所有对需求知识库的引用版本为v2.2。
  - **历史性提升记录**: 本次更新基于2026-01-30的用户反馈，发现UI效果图遗漏了大量关键界面，根本原因是策划知识库缺少UI系统的整体架构定义。此次更新补充了UI系统的整体架构，确保所有必要的UI界面都被定义和设计。
- **v2.1 (2026-01-30)**:
  - 新增"**游戏基础规范**"章节（第0章），明确定义游戏类型、屏幕方向、分辨率、Unity版本、平台等基础规范。
  - 更新所有对需求知识库的引用版本为v2.1。
  - **历史性提升记录**: 本次更新基于2026-01-29的实战反馈，补充了游戏基础规范的强制定义，确保所有策划案都符合游戏的基础规范。
- **v2.0 (2026-01-30)**:
  - **历史性升级**：基于《迷雾大陆》参考游戏分析和Cursor实战反馈进行全面升级
  - 新增"参考标准"章节，明确以《迷雾大陆》为参考标准
  - 新增"隐性知识显性化"章节，补充游戏设计的常识、惯例、经验
  - 新增"策划案拆分规范"章节，定义主策划案、UI策划案、数值策划案的拆分标准
  - 新增"策划案完成指南"章节，明确策划案的交付标准（特别是UI图示要求）
  - 更新"关卡系统"章节，明确10关逐步解锁的设计
  - 更新"装备系统"章节，明确6个装备槽位的设计
  - 补充"UI反馈系统"章节，基于《迷雾大陆》分析补充详细的UI反馈规范
- **v1.7 (2026-01-29)**: 迭代补全事件参数、核心数据流、测试SOP模板
- **v1.6 (2026-01-29)**: 扩展完整事件定义表、新增UI反馈具体实现规范、更新Unity版本
- **v1.5 (2026-01-29)**: 新增游戏流程与状态机、UI系统设计规范、UI反馈系统设计规范等章节
- **v1.4 (2026-01-29)**: 剥离美术和音效设计标准，转为需求约束
- **v1.3 (2026-01-28)**: 新增测试验收标准章节
- **v1.2 (2026-01-28)**: 新增多个核心设计章节
- **v1.1 (2026-01-28)**: 新增数值护栏章节
- **v1.0 (2026-01-28)**: 初始版本

---

## 零、游戏基础规范（引用）

> **唯一口径**：游戏类型、屏幕、Unity 版本、平台、性能以 **《00_项目基础规范》** 为准。路径：`知识库与策划案/00_项目基础规范.md`。本知识库不再重复 0.1～0.5。

### 0.6 UI系统整体架构

> **重要**: 本章节明确定义了UI系统的整体架构，包括UI界面层级、全局导航体系、交互流程。**18 个 UI 界面清单**见《00_项目基础规范》第 6 节。所有UI策划案必须严格遵循本章节定义的架构。

#### 0.6.1 UI界面层级定义

UI系统分为三个层级：

1. **一级界面（主要界面）**：游戏的主要功能界面，玩家可以通过全局导航或主界面按钮进入
   - 包括：主界面、关卡选择、战斗界面、背包、结算、角色属性、技能、商城、设置
   - 特点：全屏显示，占据整个屏幕

2. **二级界面（弹窗、确认界面）**：在一级界面之上弹出的界面，用于显示详细信息或确认操作
   - 包括：关卡确认、道具详情、出售确认、装备详情、技能升级确认、暂停菜单、失败界面
   - 特点：居中弹窗，背景半透明，可关闭

3. **全局组件**：在多个界面中都会出现的UI元素，用于提供全局导航和状态显示
   - 包括：主菜单栏（底部导航栏）、顶部状态栏
   - 特点：始终显示，不受界面切换影响

#### 0.6.2 全局导航体系

**主菜单栏（底部导航栏）**是游戏的核心导航组件，在以下界面中显示：

- 主界面
- 关卡选择界面
- 背包界面
- 角色属性界面
- 技能界面
- 商城界面
- 设置界面

**主菜单栏包含的入口**（首版口径）：

| 入口名称 | 功能 | 目标界面 |
|---------|------|----------|
| 背包 | 查看和管理物品 | 背包界面 |
| 商城 | 购买道具、装备 | 商城界面 |
| 设置 | 音量、画质、语言等设置 | 设置界面 |
| 主页 | 返回主界面 | 主界面 |

> **说明（解决策划案/效果图口径不一致）**：  
> - UI效果图中的底部导航栏为 **4 入口（主页/背包/商城/设置）**。  
> - “角色属性/技能”入口由 **主界面（UI-01）按钮**提供；“退出”入口放在 **设置（UI-09）或二级确认弹窗**。  
> - 后续版本如需扩展为 6 入口（角色/背包/技能/商城/设置/退出），需要补齐效果图与交互规范，并更新需求知识库对应描述。

**顶部状态栏**在多个界面中显示，显示以下资源：

- 金币（Gold）
- 钻石（Diamond，预留字段：首版可显示为 0 或隐藏）
- 体力（Energy，预留字段：首版可显示为 0 或隐藏）

#### 0.6.3 UI交互流程

**主要交互流程**：

1. **开始游戏流程**：主界面 → 关卡选择 → 关卡确认 → 战斗界面 → 结算界面 → 主界面
2. **背包管理流程**：背包界面 → 点击道具 → 道具详情 → 使用/出售 → 出售确认 → 背包界面
3. **技能升级流程**：技能界面 → 点击技能 → 技能升级确认 → 技能界面
4. **战斗中暂停流程**：战斗界面 → 点击暂停 → 暂停菜单 → 继续/设置/退出
5. **失败流程**：战斗界面 → 玩家死亡 → 失败界面 → 重新开始/返回主界面

#### 0.6.4 UI界面完整性要求

所有UI策划案必须包含以下所有界面的详细设计：

- **一级界面**：9个（主界面、关卡选择、战斗界面、背包、结算、角色属性、技能、商城、设置）
- **二级界面**：7个（关卡确认、道具详情、出售确认、装备详情、技能升级确认、暂停菜单、失败界面）
- **全局组件**：2个（主菜单栏、顶部状态栏）

具体的UI界面列表请参考《游戏生成的需求知识库 v2.2》第0.6节。

---

## 一、参考标准

### 1.1 参考游戏

本知识库以**《迷雾大陆》**作为参考标准，确保AI策划生成的策划案至少达到《迷雾大陆》的水平。

**《迷雾大陆》核心特征**:
- **游戏类型**: 3D Action RPG，单机刷刷刷
- **核心吸引力**: 刷刷刷的爽快感 + 装备掉落的惊喜感 + 角色成长的满足感
- **目标玩家**: 中度玩家，有一定RPG经验，单局时间3-5分钟
- **关卡设计**: 10关逐步解锁，每关有波次刷怪，最后有BOSS
- **装备系统**: 6个装备槽位（武器、头盔、衣服、裤子、鞋子、饰品），装备品质用颜色区分
- **UI布局**: 左下角虚拟摇杆，右下角技能按钮，顶部状态栏，右上角设置按钮
- **战斗反馈**: 打击感强，受击僵直，暴击特效，掉落拾取
- **UI反馈**: 按钮点击缩放，消息气泡，弹框，数值变化飘字

### 1.2 参考标准的作用

1. **功能完整性参考**: 确保我们的策划案包含《迷雾大陆》的所有核心功能
2. **UI/UX参考**: 确保我们的UI布局、交互方式、反馈机制与《迷雾大陆》一致
3. **系统设计参考**: 确保我们的系统设计（关卡、装备、技能等）与《迷雾大陆》一致
4. **质量标准参考**: 确保我们的策划案质量至少达到《迷雾大陆》的水平

---

## 二、隐性知识显性化

本章节补充"人类策划都知道，但AI不知道"的隐性知识，包括游戏设计的常识、惯例、经验、最佳实践。

### 2.1 游戏设计的基本常识

#### 2.1.1 RPG游戏的核心循环

**标准循环**: 战斗 → 收获 → 养成 → 挑战更强敌人 → 战斗

**关键要素**:
1. **正反馈循环**: 玩家的每一个动作都应得到及时、清晰、令人愉悦的反馈
2. **成长感**: 玩家应该能够明显感受到角色的成长（等级提升、装备变强、技能变强）
3. **挑战感**: 游戏应该有适当的难度曲线，让玩家感受到挑战但不至于挫败
4. **奖励感**: 玩家应该能够获得有价值的奖励（装备、金币、经验），并且奖励应该与付出成正比

#### 2.1.2 关卡设计的基本原则

**节奏控制**:
- **开场**: 前30秒应该让玩家快速进入战斗状态，不要有过多的等待时间
- **中场**: 保持"紧张-放松"的节奏，避免持续高强度战斗导致玩家疲劳
- **结尾**: BOSS战应该是整个关卡的高潮，提供最强的挑战和最丰厚的奖励

**难度曲线**:
- **第1-3关**: 新手教学关卡，难度较低，让玩家熟悉操作和系统
- **第4-7关**: 正常难度，逐步提升挑战
- **第8-10关**: 高难度，需要玩家有一定的装备和技能才能通过

**怪物分布**:
- **波次设计**: 每关应该有3-5波怪物，每波之间有短暂的休息时间
- **怪物类型**: 每波应该有不同类型的怪物组合（如近战+远程，普通+精英）
- **BOSS设计**: BOSS应该有明显的技能机制，而不是单纯的数值堆砌

#### 2.1.3 装备系统的基本原则

**装备槽位**:
- **标准槽位**: 武器、头盔、衣服、裤子、鞋子、饰品（6个槽位）
- **扩展槽位**: 副手武器、项链、戒指（可选，根据游戏复杂度决定）

**装备品质**:
- **颜色区分**: 灰色（普通）、蓝色（稀有）、紫色（史诗）、橙色（传说）
- **属性差异**: 品质越高，属性加成越大，特殊效果越强
- **掉落概率**: 品质越高，掉落概率越低（如普通80%、稀有15%、史诗4%、传说1%）

**装备获取**:
- **掉落**: 击杀怪物有概率掉落装备
- **商店**: 玩家可以用金币购买装备（可选）
- **合成**: 玩家可以用材料合成装备（可选）

**装备穿戴**:
- **自动穿戴**: 当玩家获得比当前装备更好的装备时，自动提示"是否穿戴"（可选）
- **手动穿戴**: 玩家打开背包，拖拽装备到装备槽位，或点击装备选择"穿戴"

#### 2.1.4 UI设计的基本原则

**信息分区**:
- **左上角**: 玩家信息（血条、蓝条、等级、经验条）
- **右上角**: 系统按钮（设置、背包、地图等）
- **左下角**: 虚拟摇杆
- **右下角**: 技能按钮
- **顶部中央**: 关卡信息（波次、倒计时等）
- **底部中央**: 消息提示（如"获得金币x10"）

**UI反馈**:
- **按钮点击**: 按钮被点击时，应该有明显的视觉反馈（如缩放至95%）和音效反馈
- **数值变化**: 重要的数值变化（如血量减少、金币增加）应该有明显的视觉反馈（如颜色闪烁、飘字动画）
- **状态提示**: 玩家应该能够清楚地知道当前的游戏状态（如技能冷却中、装备可升级等）

**UI动画**:
- **界面切换**: 界面切换时应该有过渡动画（如淡入淡出、滑入滑出）
- **弹窗**: 弹窗应该有打开和关闭动画（如从中心缩放放大/缩小）
- **提示**: 消息提示应该有飘入和飘出动画（如从底部飘入，2-3秒后自动消失）

### 2.2 游戏设计的标准体验

#### 2.2.1 新手教程的标准设计

**目标**: 让玩家在3分钟内理解游戏的核心玩法和操作方式。

**标准流程**:
1. **欢迎界面**: 显示游戏标题和"点击屏幕开始"提示
2. **职业选择**: 让玩家选择职业（如战士、法师、猎人），每个职业有简短的介绍
3. **操作教学**: 通过手机模拟图教学操作（如"拖动左下角摇杆移动"、"点击右下角按钮释放技能"）
4. **第一次战斗**: 让玩家击杀1-2个弱小的怪物，体验战斗的基本流程
5. **第一次掉落**: 让玩家拾取第一件装备，体验装备系统
6. **完成教程**: 显示"教程完成"提示，进入主界面

**禁止的错误做法**:
- 教程过长（超过5分钟），导致玩家失去耐心
- 教程过于复杂，一次性教学过多内容，导致玩家记不住
- 教程没有跳过选项，强制玩家完成，导致老玩家体验不佳

#### 2.2.2 关卡选择的标准设计

**目标**: 让玩家能够快速选择想要挑战的关卡，并了解关卡的基本信息。

**标准布局**:
- **关卡列表**: 显示所有关卡，已解锁的关卡可点击，未解锁的关卡显示解锁条件
- **关卡信息**: 点击关卡后，显示关卡的基本信息（如关卡名称、推荐等级、奖励预览）
- **开始按钮**: 点击"开始"按钮后，进入Loading界面，然后进入战斗场景

**关卡解锁规则**:
- **线性解锁**: 玩家必须通过第N关才能解锁第N+1关
- **星级解锁**: 玩家必须获得一定数量的星级才能解锁后续关卡（可选）

#### 2.2.3 战斗界面的标准设计

**目标**: 让玩家能够专注于战斗，同时能够清楚地了解当前的战斗状态。

**标准布局**:
- **左上角**: 玩家血条、蓝条（如有）、等级
- **右上角**: 设置按钮、暂停按钮
- **左下角**: 虚拟摇杆
- **右下角**: 技能按钮（2-3个）
- **顶部中央**: 关卡信息（如"第1波/共3波"、"BOSS血条"）
- **中央**: 战斗场景

**战斗反馈**:
- **打击感**: 怪物被击中时，应该有明显的受击特效、短暂僵直或后退
- **暴击**: 暴击时，应该有特殊的视觉特效和音效，伤害数字应该更大更醒目
- **掉落**: 怪物死亡时，应该爆出金币和装备，并有明显的掉落动画
- **拾取**: 玩家靠近掉落物时，掉落物自动飞向玩家（磁吸效果），并播放拾取音效

#### 2.2.4 结算界面的标准设计

**目标**: 让玩家能够清楚地了解本局的收获，并提供下一步的操作选项。

**标准布局**:
- **顶部**: 胜利/失败标题
- **中央**: 本局收获（如金币、经验、装备）
- **底部**: 操作按钮（如"返回主菜单"、"重试"、"下一关"）

**胜利结算**:
- **显示内容**: 本局获得的金币、经验、装备，以及关卡评分（如1-3星）
- **操作选项**: "返回主菜单"、"下一关"

**失败结算**:
- **显示内容**: 本局获得的金币、经验（按一定比例结算，如50%）
- **操作选项**: "返回主菜单"、"重试"

### 2.3 游戏设计的最佳实践

#### 2.3.1 数值平衡的最佳实践

**原则**: 数值设计应该让玩家感受到成长，但不应该让玩家感受到"碾压"或"被碾压"。

**成长曲线**:
- **线性成长**: 每级属性增长固定（如每级+10 HP、+2 Attack）
- **指数成长**: 每级属性增长递增（如第1级+10 HP，第2级+12 HP，第3级+14 HP）

**难度平衡**:
- **玩家vs普通怪物**: 玩家应该能够在3-5次攻击内击杀普通怪物
- **玩家vs精英怪物**: 玩家应该能够在10-15次攻击内击杀精英怪物
- **玩家vs BOSS**: 玩家应该能够在30-60秒内击杀BOSS

**装备影响**:
- **单件装备**: 单件装备提供的核心属性不应超过玩家当前基础属性的50%
- **全套装备**: 全套装备提供的核心属性不应超过玩家当前基础属性的200%

#### 2.3.2 UI/UX设计的最佳实践

**原则**: UI应该简洁、清晰、一致，不应该干扰玩家的游戏体验。

**简洁性**:
- **减少层级**: UI层级不应超过3层（如主界面 → 背包 → 装备详情）
- **减少元素**: 每个界面的可交互元素不应超过10个

**清晰性**:
- **信息分区**: 不同类型的信息应该放在不同的区域，避免混淆
- **视觉层级**: 重要信息应该更大、更醒目，次要信息应该更小、更低调

**一致性**:
- **按钮样式**: 所有按钮应该使用相同的样式和交互方式
- **动画效果**: 所有界面切换应该使用相同的动画效果和时长
- **音效反馈**: 所有可交互元素应该使用相同的音效反馈

#### 2.3.3 关卡设计的最佳实践

**原则**: 关卡应该有明确的目标、合理的难度、丰富的奖励。

**目标设计**:
- **明确目标**: 每个关卡应该有明确的目标（如"击败所有怪物"、"存活3分钟"）
- **可选目标**: 每个关卡可以有可选目标（如"不受伤通关"、"30秒内通关"），完成可选目标可以获得额外奖励

**难度设计**:
- **渐进式难度**: 关卡难度应该逐步提升，让玩家有适应的时间
- **难度曲线**: 关卡难度不应该有突然的跳跃，应该保持平滑的曲线

**奖励设计**:
- **基础奖励**: 每个关卡应该有基础奖励（如金币、经验）
- **首通奖励**: 首次通关应该有额外奖励（如装备、材料）
- **星级奖励**: 根据关卡评分（如1-3星）提供不同的奖励

---

## 三、策划案拆分规范

本章节定义了策划案的拆分标准，确保策划案的可管理性和可维护性。

### 3.1 策划案拆分原则

**原则**: 策划案应该按照"功能模块"进行拆分，每个模块应该独立、完整、可复用。

**拆分标准**:
1. **主策划案**: 包含游戏的核心设计（系统规则、游戏循环、功能描述），但不包含UI细节和数值细节
2. **UI策划案**: 包含所有UI界面的详细设计（布局、交互、动画、反馈），包含大量UI效果图和交互图
3. **数值策划案**: 包含所有数值的详细设计（属性、公式、配置表），包含大量数值表格和公式说明

### 3.2 主策划案的内容范围

**包含内容**:
- 游戏核心设定（题材、世界观、美术风格、视角、操作模式）
- 核心玩法与循环（高层核心循环、单局流程）
- 核心系统设计框架（战斗系统、技能系统、成长系统、关卡系统）
- 美术与音效需求约束（风格要求、资产清单、关键表现）
- 测试验收标准（SOP模板）
- 游戏流程与状态机（状态定义、状态转换规则、玩家体验路径）
- 系统间协作与数据流转（系统依赖关系、通信机制、数据流转路径）
- 配置数据结构定义（JSON格式）

**不包含内容**:
- UI界面的详细设计（布局、交互、动画、反馈）→ 转移到UI策划案
- 数值的详细设计（属性、公式、配置表）→ 转移到数值策划案

### 3.3 UI策划案的内容范围

**包含内容**:
- UI系统设计规范（界面结构定义、布局规范、交互逻辑）
- UI反馈系统设计规范（基础反馈规范、通用反馈规范、模态与非模态反馈规则）
- UI界面层级与状态管理（界面层级、共存规则、打开/关闭逻辑）
- 所有UI界面的详细设计（包含UI效果图、交互图、动画参数）
- UI资产清单（图标、按钮、背景、特效等）

**UI效果图要求**:
- **数量**: 每个UI界面至少1张效果图，复杂界面（如背包、装备）需要多张效果图展示不同状态
- **内容**: 效果图应该清晰地展示UI界面的布局、元素、文本、图标等
- **标注**: 效果图应该有详细的标注，说明每个元素的功能、位置、大小等
- **格式**: 效果图应该使用PNG格式，分辨率至少1080x1920

### 3.4 数值策划案的内容范围

**包含内容**:
- 数值设计框架（数值护栏、成长曲线约束）
- 基础属性与伤害公式（属性定义、公式说明）
- 技能数据模型（技能配置、技能参数）
- 装备数据模型（装备配置、装备属性）
- 怪物数据模型（怪物配置、怪物属性）
- 掉落表数据模型（掉落配置、掉落概率）
- 关卡数据模型（关卡配置、波次配置）
- 所有数值配置表（JSON格式）

**数值表格要求**:
- **格式**: 所有数值表格应该使用Markdown表格格式或JSON格式
- **完整性**: 所有数值表格应该包含所有必需的字段
- **一致性**: 所有数值表格应该使用相同的命名规范和数据格式

---

## 四、策划案完成指南

本章节定义了策划案的交付标准，确保策划案的质量和完整性。

### 4.1 主策划案的交付标准

**必需内容**:
- ✅ 游戏核心设定（题材、世界观、美术风格、视角、操作模式）
- ✅ 核心玩法与循环（高层核心循环、单局流程）
- ✅ 核心系统设计框架（战斗系统、技能系统、成长系统、关卡系统）
- ✅ 美术与音效需求约束（风格要求、资产清单、关键表现）
- ✅ 测试验收标准（SOP模板，至少包含5个核心测试用例）
- ✅ 游戏流程与状态机（状态定义、状态转换规则、玩家体验路径）
- ✅ 系统间协作与数据流转（系统依赖关系、通信机制、数据流转路径）
- ✅ 配置数据结构定义（JSON格式，至少包含关卡、怪物、装备、掉落表、技能）

**质量标准**:
- ✅ 所有系统设计都有明确的边界和分类
- ✅ 所有系统设计都有明确的数据模型（JSON格式）
- ✅ 所有系统设计都有明确的测试用例
- ✅ 所有系统设计都符合《迷雾大陆》的参考标准

### 4.2 UI策划案的交付标准

**必需内容**:
- ✅ UI系统设计规范（界面结构定义、布局规范、交互逻辑）
- ✅ UI反馈系统设计规范（基础反馈规范、通用反馈规范、模态与非模态反馈规则）
- ✅ UI界面层级与状态管理（界面层级、共存规则、打开/关闭逻辑）
- ✅ 所有UI界面的详细设计（至少包含主界面、关卡选择、战斗界面、背包界面、设置界面、结算界面）
- ✅ 所有UI界面的效果图（每个界面至少1张，复杂界面需要多张）
- ✅ UI资产清单（图标、按钮、背景、特效等）

**UI效果图要求**:
- ✅ 每个UI界面至少1张效果图
- ✅ 效果图清晰地展示UI界面的布局、元素、文本、图标等
- ✅ 效果图有详细的标注，说明每个元素的功能、位置、大小等
- ✅ 效果图使用PNG格式，分辨率至少1080x1920

**质量标准**:
- ✅ 所有UI界面都有明确的结构定义
- ✅ 所有UI界面都有明确的交互逻辑
- ✅ 所有UI界面都有明确的动画参数
- ✅ 所有UI界面都符合《迷雾大陆》的参考标准

### 4.3 数值策划案的交付标准

**必需内容**:
- ✅ 数值设计框架（数值护栏、成长曲线约束）
- ✅ 基础属性与伤害公式（属性定义、公式说明）
- ✅ 技能数据模型（技能配置、技能参数）
- ✅ 装备数据模型（装备配置、装备属性）
- ✅ 怪物数据模型（怪物配置、怪物属性）
- ✅ 掉落表数据模型（掉落配置、掉落概率）
- ✅ 关卡数据模型（关卡配置、波次配置）
- ✅ 所有数值配置表（JSON格式，至少包含10关、10种怪物、20件装备、5个技能）

**质量标准**:
- ✅ 所有数值都在数值护栏范围内
- ✅ 所有数值都有明确的公式说明
- ✅ 所有数值配置表都使用JSON格式
- ✅ 所有数值配置表都包含所有必需的字段

---

## 五、游戏核心设定

### 5.1 项目基本信息

- **工作名**: 我叫MT之魔兽归来 (WarcraftReturn)
- **类型**: 单机、单人、小型刷刷刷 RPG
- **平台**: 移动 (Android / iOS)，以抖音小游戏为主要目标平台
- **引擎**: Unity 2022.3.47f1
- **游戏模式**: 3D游戏
- **屏幕**: 竖屏 (1080x1920)
- **操作**: 单手（虚拟摇杆 + 技能按钮）

### 5.2 游戏题材、世界观与美术风格

> **原则**: 这是所有美术和内容产出的最高"宪法"，后续所有设计（角色、场景、UI、文案）都必须严格遵守。

- **核心题材**: 我叫MT之魔兽归来 (I am MT: Warcraft's Return)
- **关键词**: 魔兽、刷怪、打宝、角色扮演、单机、小游戏
- **世界观基调**: 轻度、幽默、致敬经典的魔兽世界。我们不是在做一个严肃宏大的史诗，而是一个让玩家能轻松体验"刷刷刷"乐趣的小游戏。
- **核心冲突**: 玩家扮演的冒险者，在一个充满经典魔兽元素（如鱼人、狗头人、兽人）的世界中，通过不断战斗和成长，挑战更强大的敌人，获取更好的装备。
- **美术风格**: 3D卡通渲染，具有PC/主机游戏的质感，而非低龄化的Q版风格。**场景与环境**遵循《游戏开发美术知识库》主色调（低饱和度冷色）；**角色与 UI** 可色彩鲜明、饱和度适中，并与背景可读性区分。

### 5.3 视角与操作模式

- **视角**: 3D第三人称视角，固定高度，相机轻微跟随玩家。
- **操作模式**:
  - **移动**: 屏幕左下虚拟摇杆。
  - **普攻**: 自动攻击（进入攻击范围自动攻击最近敌人）。
  - **技能**: 屏幕右下 2～3 个技能按钮，点击释放，有冷却时间。
  - **拾取**: 靠近自动拾取。

---

## 六、核心玩法与循环

### 6.1 高层核心循环

1.  **出战**: 从主界面选择关卡，进入战斗场景。
2.  **战斗**: 进行实时战斗（自动普攻 + 手动技能 + 走位）。
3.  **收获**: 击杀怪物，获得金币、经验、装备。
4.  **结算**: 关卡结束（胜利或失败），进入结算界面。
5.  **养成**: 回到主界面，进行角色养成（升级、换装、升技能）。
6.  **循环**: 挑战更高难度的关卡。

### 6.2 单局必备流程（胜利与失败）

任意一局游戏都必须具备明确的胜利和失败条件，以及对应的结算路径。

- **胜利条件**: 击败关卡最终BOSS或完成指定任务目标（如存活特定时间）。
- **失败条件**: 玩家死亡且无法或选择不复活。
- **失败保留收益**: 即使失败，本局获得的经验、金币等基础产出也应按一定比例结算给玩家，确保"每局不白玩"。

---

## 七、核心系统设计框架

### 7.1 战斗系统

#### 7.1.1 战斗系统趣味性依赖

> **原则**: 战斗体验的核心是正反馈循环。玩家的每一个动作都应得到及时、清晰、令人愉悦的反馈，以驱动他们持续战斗。

- **打击感 (Hit Feedback)**: 
  - **视觉**: 怪物被击中时必须有明显的受击特效、短暂僵直或后退等表现。
  - **音效**: 每次攻击和受击都必须有对应的音效。
  - **特效**: 暴击、技能命中时应有更华丽的视觉特效（VFX）。
- **死亡反馈 (Death Feedback)**: 
  - **怪物死亡**: 怪物死亡时应有碎裂、消失或倒地等表现，并爆出金币和装备，这是最直接的奖励反馈。
  - **玩家死亡**: 玩家死亡时应有特殊的音效和屏幕效果（如屏幕变灰），以示警告。
- **节奏控制 (Pacing)**: 
  - **怪物分布**: 关卡中的怪物分布应有疏有密，形成"紧张-放松"的节奏。
  - **精英/BOSS战**: 在连续的普通战斗后，安排一场精英或BOSS战，作为阶段性的挑战和奖励节点。

#### 7.1.2 基础属性与伤害公式

- **基础属性**: HP（生命值）、Attack（攻击力）、Defense（防御力）、MoveSpeed（移动速度）、AttackSpeed（攻击速度）、CritChance（暴击率）、CritDamage（暴击伤害系数）。
- **基础伤害公式**:
  ```
  基础伤害 = Attack * 技能倍率
  减伤系数 = Defense / (Defense + K)  # K为常数，例如100
  最终伤害 = 基础伤害 * (1 - 减伤系数)
  若暴击: 最终伤害 *= (1 + CritDamage)
  ```

### 7.2 技能系统

#### 7.2.1 技能系统设计原则

> **原则**: 技能是战斗的核心变量，用于打破"数值互推"的枯燥感，为玩家提供策略选择和爽快感。技能设计必须有明确的边界和分类。

- **技能分类**:
  - **主动技能 (Active Skill)**: 玩家手动点击释放，有冷却时间。分为伤害型、控制型、生存型。
  - **被动技能 (Passive Skill)**: 无需手动释放，提供常驻加成（属性光环）或满足条件自动触发（触发效果）。
- **设计边界**:
  - **禁止**: 无冷却的强力技能、效果过于复杂的技能、毫无用处的技能。
  - **必须**: 至少一个AOE技能（保证刷怪效率）、一个生存技能（提高容错率）。

#### 7.2.2 技能数据模型 (JSON格式)

所有技能都必须遵循此数据结构，以便程序和AI生成和解析。

```json
{
  "skill_id": "SK001",
  "skill_name": "多重箭",
  "skill_type": "Active_Damage",
  "description": "向前方扇形区域发射5支箭，每支造成80%攻击力的伤害。",
  "cooldown": 8.0,
  "parameters": {
    "arrow_count": 5,
    "damage_multiplier": 0.8,
    "aoe_shape": "cone",
    "aoe_range": 10.0,
    "aoe_angle": 60
  },
  "upgrade_effects": [
    {"level": 2, "description": "冷却时间减少1秒", "cooldown": -1.0},
    {"level": 3, "description": "箭矢数量增加2支", "parameters.arrow_count": 2}
  ]
}
```

### 7.3 成长系统

- **角色等级**: 击杀怪物获得经验，经验条满后升级，提升基础属性。
- **装备系统**: 核心成长线。通过战斗掉落获得，分为不同品质（普通、稀有、史诗、传说），提供大量属性加成。

### 7.4 关卡系统

- **首版实现**: 线性主线关卡，共10关。
- **关卡解锁**: 玩家必须通过第N关才能解锁第N+1关。
- **关卡模板**: 包含若干波普通怪物和最终的BOSS或精英怪，时长控制在3-5分钟。
- **难度曲线**: 
  - **第1-3关**: 新手教学关卡，难度较低
  - **第4-7关**: 正常难度，逐步提升挑战
  - **第8-10关**: 高难度，需要玩家有一定的装备和技能才能通过

### 7.5 装备系统

- **装备槽位**: 6个槽位（武器、头盔、衣服、裤子、鞋子、饰品）
- **装备品质**: 灰色（普通）、蓝色（稀有）、紫色（史诗）、橙色（传说）
- **装备获取**: 击杀怪物掉落
- **装备穿戴**: 打开背包，拖拽装备到装备槽位，或点击装备选择"穿戴"

---

## 八、美术与音效需求约束

> **原则**: 本章节不再定义具体的美术/音效"如何做"，而是定义"需要什么"。美术实现参考《游戏开发美术知识库 v2.2》；音效首版实现参考《交付文档/音效最小规范与清单_v3.2.md》。

### 8.1 美术需求约束

- **风格要求**: 必须严格遵循《游戏开发美术知识库 v2.2》中定义的"3D卡通渲染、轻度暗黑"风格。
- **资产清单**: GDD中必须提供详细的美术资产清单，包括角色、怪物、场景物件、UI图标、特效等，并描述其用途和表现要求。
- **关键表现**: 
  - **打击感**: 策划需要明确哪些技能需要强烈的打击感表现，美术AI需据此设计特效。
  - **死亡反馈**: 策划需要定义不同类型怪物的死亡表现（如普通怪物碎裂、精英怪物溶解、BOSS爆炸）。

### 8.2 音效需求约束

- **风格要求**: 首版以《交付文档/音效最小规范与清单_v3.2.md》为准（允许占位/复用，但不得影响流程与稳定性）
- **资产清单**: GDD中必须提供详细的音效资产清单，包括BGM、战斗音效、UI音效等。

---

## 九、测试验收标准

> **原则**: 这是连接策划意图和程序实现的桥梁。策划AI在生成GDD时，**必须**包含一个基于此模板的、详细的《游戏功能验收测试SOP》附录。这份SOP是程序AI生成自动化测试的唯一依据。

### 9.1 SOP的核心目的

1.  **确保核心玩法正确性**: 验证游戏的核心循环是否如策划所设计的那样顺畅运行。
2.  **为程序AI提供明确的测试目标**: 将模糊的"测试游戏"需求，转化为具体、可执行的操作步骤和预期结果。
3.  **实现自动化验收**: 使程序AI能够生成可重复执行的自动化测试脚本（如Unity PlayMode Test），替代传统的人工"点点点"。

### 9.2 《游戏功能验收测试SOP》模板

| 测试用例ID | 测试模块 | 前置条件 | 操作步骤 | 预期结果 | 自动化可行性 |
|---|---|---|---|---|---|
| TC-GAMEPLAY-001 | 核心战斗循环 | 玩家位于主界面 | 1. 点击"开始游戏"按钮<br>2. 点击"第一关"<br>3. 在场景中移动摇杆<br>4. 接近并击杀一个怪物<br>5. 拾取掉落物<br>6. 击杀最终BOSS<br>7. 在结算界面点击"返回主城" | 1. 界面切换到关卡选择<br>2. 成功加载Gameplay场景<br>3. 玩家角色正常移动<br>4. 怪物播放受击和死亡动画，并掉落物品<br>5. 物品消失，玩家背包或属性变化<br>6. 弹出胜利结算界面<br>7. 成功返回主界面 | 高 |
| TC-UI-001 | 主界面UI | 游戏启动完成 | 1. 点击"设置"按钮<br>2. 拖动音量滑块<br>3. 点击"关闭"按钮 | 1. 弹出设置面板<br>2. 背景音乐音量变化<br>3. 设置面板关闭 | 高 |
| TC-SKILL-001 | 技能释放 | 玩家在战斗场景，技能冷却完毕 | 1. 点击"技能1"按钮 | 1. 玩家播放技能动画<br>2. 产生对应的技能效果（如多重箭/投射物/扇形AOE）<br>3. 技能按钮进入冷却倒计时状态 | 高 |
| TC-DEATH-001 | 玩家死亡与失败结算 | 玩家在战斗场景 | 1. 控制玩家持续受到怪物攻击直至HP归零 | 1. 玩家播放死亡动画，派发 PLAYER_KILLED，GameManager 派发 LEVEL_FAILED<br>2. 弹出失败结算界面，显示本局保留收益（按配置比例）<br>3. 玩家可点击「重试」或「返回主菜单」 | 高 |
| TC-VICTORY-001 | 关卡胜利与结算 | 玩家在战斗场景，已生成所有波次与BOSS | 1. 击杀所有怪物（含BOSS）或满足关卡胜利条件 | 1. 触发 LEVEL_COMPLETED<br>2. GameManager 进入 Settlement<br>3. 弹出胜利结算界面并可返回主菜单 | 高 |

---

## 十、游戏流程与状态机

本章节定义了游戏从启动到结束的完整流程和状态转换，是程序AI理解"游戏如何运转"的核心依据。

### 10.1 游戏核心状态定义

游戏必须包含以下核心状态：

| 状态ID | 状态名称 | 描述 |
|---|---|---|
| `Init` | 初始化 | 游戏启动，加载基础资源 |
| `MainMenu` | 主界面 | 显示主菜单，玩家可进行关卡选择、角色养成等操作 |
| `Loading` | 加载中 | 进入关卡前的资源加载 |
| `InGame` | 游戏内 | 玩家进行战斗、探索等核心玩法 |
| `Paused` | 暂停 | 游戏暂停，显示暂停菜单 |
| `Settlement` | 结算 | 战斗结束，显示结算界面 |

### 10.2 游戏状态转换规则

程序AI必须根据以下规则实现游戏的主流程控制。所有状态转换必须是明确定义的，不允许出现未定义的状态跳转。

**状态转换表**：

| 当前状态 | 触发条件 | 目标状态 |
|---|---|---|
| `Init` | 资源加载完毕 | `MainMenu` |
| `MainMenu` | 点击"开始游戏"按钮 | `Loading` |
| `Loading` | 关卡资源加载完毕 | `InGame` |
| `InGame` | 点击暂停按钮 | `Paused` |
| `Paused` | 点击继续按钮 | `InGame` |
| `Paused` | 点击返回主菜单按钮 | `MainMenu` |
| `InGame` | 关卡结束（胜利/失败） | `Settlement` |
| `Settlement` | 点击返回主菜单按钮 | `MainMenu` |

### 10.3 玩家体验路径

策划案中必须包含至少一条完整的玩家体验路径描述，说明玩家从启动游戏到完成一次核心循环的每一步操作和预期结果。例如：

1. 玩家启动游戏，进入`MainMenu`状态
2. 玩家在主界面点击"开始游戏"按钮，进入`Loading`状态
3. 加载完成后，进入`InGame`状态
4. 玩家在关卡中击杀所有怪物，达成胜利条件，进入`Settlement`状态
5. 玩家在结算界面点击"返回主菜单"按钮，进入`MainMenu`状态

---

## 十一、系统间协作与数据流转

本章节定义了不同系统之间的依赖关系和通信机制。

### 11.1 系统依赖关系

策划案中必须明确各系统之间的依赖关系。

**示例：核心系统依赖关系**

- **战斗系统** 依赖 **技能系统**、**角色属性系统**
- **UI系统** 依赖 **角色属性系统**、**背包系统**
- **背包系统** 依赖 **角色属性系统**

### 11.2 系统间通信机制

- **事件驱动**：系统间通信应优先使用事件驱动机制，以降低耦合度。例如，当玩家血量变化时，角色属性系统应派发一个`HEALTH_CHANGED`事件，UI系统监听该事件并更新血条。

**完整事件定义表**：

| 事件名称 | 派发者 | 监听者 | 事件参数 | 触发时机 | 用途说明 |
|---|---|---|---|---|---|
| `GAME_STATE_CHANGED` | GameManager | UIManager、AudioManager | GameState（新状态） | 游戏状态切换时 | UI和音效系统根据状态变化调整表现 |
| `HEALTH_CHANGED` | 角色属性系统（PlayerStats/MonsterStats） | UI系统 | 当前HP、最大HP | 角色HP变化时 | 更新血条显示 |
| `MANA_CHANGED` | 角色属性系统 | UI系统 | 当前MP、最大MP | 角色MP变化时 | 更新蓝条显示（如有） |
| `MONSTER_KILLED` | 战斗系统（MonsterStats） | 掉落系统、成就系统、统计系统 | 怪物ID、位置、击杀者ID | 怪物死亡时 | 触发掉落、更新成就和统计 |
| `PLAYER_KILLED` | 战斗系统（PlayerStats） | GameManager、UI系统、音效系统 | 玩家ID | 玩家死亡时 | 触发死亡流程、显示死亡UI |
| `ITEM_DROPPED` | 掉落系统（LootManager） | 场景系统 | item_type、item_id、count、position | 生成掉落物时 | 在场景中显示掉落物（金币/装备等） |
| `ITEM_PICKED_UP` | 拾取系统（DropPickup） | 背包系统、UI系统 | item_type、item_id、count、position | 玩家拾取物品时（首版：靠近自动拾取） | 添加到背包/金币、更新UI |
| `INVENTORY_UPDATED` | 背包系统 | UI系统 | 背包数据 | 背包内容变化时 | 刷新背包界面 |
| `EQUIPMENT_CHANGED` | 背包系统 | 角色属性系统、UI系统 | 装备ID、装备槽位 | 装备/卸下装备时 | 更新角色属性、刷新装备界面 |
| `LEVEL_UP` | 角色属性系统 | UI系统、音效系统、成就系统 | 新等级、获得的属性点 | 角色升级时 | 显示升级特效、播放音效、更新UI |
| `EXP_GAINED` | 战斗系统 | UI系统 | 获得的经验值 | 获得经验时 | 更新经验条、显示经验获得提示 |
| `GOLD_CHANGED` | 经济系统 | UI系统 | 当前金币数量、变化量 | 金币变化时 | 更新金币显示、播放获得/消耗动画 |
| `SKILL_USED` | 技能系统 | 战斗系统、UI系统、音效系统 | 技能ID、释放者ID、目标位置 | 技能释放时 | 执行技能效果、更新冷却UI、播放音效 |
| `SKILL_COOLDOWN_FINISHED` | 技能系统 | UI系统 | 技能ID | 技能冷却完毕时 | 更新技能按钮状态 |
| `DAMAGE_DEALT` | 战斗系统（CombatSystem） | UI系统、音效系统 | 伤害值、是否暴击、目标ID | 造成伤害时 | 显示伤害数字、播放受击音效 |
| `DAMAGE_TAKEN` | 战斗系统 | UI系统、音效系统、角色属性系统 | 伤害值、是否暴击、受击者ID | 受到伤害时 | 显示伤害数字、播放受击音效、更新HP |
| `CRITICAL_HIT` | 战斗系统 | UI系统、音效系统、特效系统 | 伤害值、目标ID | 暴击时 | 显示特殊暴击特效和音效 |
| `BUFF_APPLIED` | 战斗系统/技能系统 | UI系统 | BuffID、持续时间、目标ID | 施加Buff时 | 显示Buff图标、更新状态栏 |
| `BUFF_REMOVED` | 战斗系统/技能系统 | UI系统 | BuffID、目标ID | Buff移除时 | 移除Buff图标 |
| `WAVE_STARTED` | 关卡系统（MonsterSpawner） | UI系统、音效系统 | 波次ID | 波次开始时 | 显示波次提示、播放音效 |
| `WAVE_COMPLETED` | 关卡系统 | UI系统、音效系统 | 波次ID | 波次完成时 | 显示完成提示、播放音效 |
| `BOSS_SPAWNED` | 关卡系统 | UI系统、音效系统、相机系统 | BOSS ID、位置 | BOSS出现时 | 显示BOSS提示、播放BGM、调整相机 |
| `BOSS_DEFEATED` | 战斗系统 | UI系统、音效系统、关卡系统 | BOSS ID | BOSS被击败时 | 显示胜利提示、播放音效、触发结算 |
| `LEVEL_COMPLETED` | 关卡系统 | GameManager、UI系统 | 关卡ID、完成时间、评分 | 关卡完成时 | 切换到结算界面 |
| `LEVEL_FAILED` | GameManager | UI系统 | 关卡ID、失败原因 | 关卡失败时 | 显示失败界面 |
| `SETTINGS_CHANGED` | 设置系统 | AudioManager、UI系统 | SettingsSaveData（bgmVolume、sfxVolume） | 设置变更时 | 应用设置（音量等）并可持久化 |
| `BUTTON_CLICKED` | UI系统 | 对应功能系统 | 按钮ID | 按钮被点击时 | 执行对应功能 |
| `DIALOG_SHOWN` | UI系统 | GameManager | 对话框ID | 显示对话框时 | 暂停游戏（如需要） |
| `DIALOG_CLOSED` | UI系统 | GameManager | 对话框ID | 关闭对话框时 | 恢复游戏（如需要） |
| `PAUSE_GAME` | GameManager | 所有系统 | 无 | 游戏暂停时 | 暂停所有游戏逻辑 |
| `RESUME_GAME` | GameManager | 所有系统 | 无 | 游戏恢复时 | 恢复所有游戏逻辑 |

### 11.3 核心数据流转路径

策划案中必须描述核心玩法的完整数据流转路径。

**示例：击杀怪物掉落流程**

1. `战斗系统`：怪物死亡，派发`MONSTER_KILLED`事件，包含怪物ID
2. `掉落系统`：监听到`MONSTER_KILLED`事件，根据怪物ID查询掉落表，生成掉落物，派发`ITEM_DROPPED`事件，包含物品ID和数量
3. `场景系统`：监听到`ITEM_DROPPED`事件，在场景中生成掉落物模型
4. `拾取系统`：玩家靠近掉落物触发拾取（首版默认：自动拾取；可扩展：点击拾取）
5. `背包系统`：增加对应物品，派发`INVENTORY_UPDATED`事件
6. `UI系统`：监听到`INVENTORY_UPDATED`事件，刷新背包界面

---

## 十二、配置数据结构定义

本章节定义了所有需要通过配置文件进行管理的系统的数据结构，必须使用JSON格式。

### 12.1 关卡配置 (level.json)

```json
{
  "level_id": 1,
  "level_name": "第一关",
  "scene_name": "Level_01",
  "waves": [
    {
      "wave_id": 1,
      "monsters": [
        {"monster_id": 101, "count": 3, "spawn_points": ["SP_01", "SP_02", "SP_03"]},
        {"monster_id": 102, "count": 1, "spawn_points": ["SP_04"]}
      ]
    }
  ],
  "boss": {
    "monster_id": 201,
    "spawn_point": "SP_BOSS"
  }
}
```

### 12.2 怪物配置 (monster.json)

```json
{
  "monster_id": 101,
  "name": "鱼人",
  "prefab_path": "Prefabs/Monsters/Murloc",
  "hp": 100,
  "attack": 10,
  "defense": 5,
  "move_speed": 2.5,
  "attack_range": 1.5,
  "drop_table_id": 1001
}
```

### 12.3 装备配置 (equipment.json)

```json
{
  "equipment_id": 201,
  "name": "铁剑",
  "type": "weapon",
  "quality": "common",
  "icon_path": "UI/Icons/Equipment/IronSword",
  "attack_bonus": 20,
  "defense_bonus": 0
}
```

### 12.4 掉落表配置 (drop_table.json)

```json
{
  "drop_table_id": 1001,
  "drops": [
    {"item_type": "gold", "item_id": 0, "count_min": 5, "count_max": 10, "probability": 1.0},
    {"item_type": "equipment", "item_id": 201, "count_min": 1, "count_max": 1, "probability": 0.1}
  ]
}
```

### 12.5 技能配置 (SkillConfigs.json)

```json
{
  "skills": [
    {
      "skill_id": "SK001",
      "skill_name": "多重箭",
      "cooldown": 8.0,
      "damage_multiplier": 0.8,
      "arrow_count": 5,
      "aoe_shape": "cone",
      "aoe_range": 10.0,
      "aoe_angle": 60.0
    }
  ]
}
```

---

## 结语

本知识库是AI策划（如Claude、ChatGPT等）生成策划案的核心指南。通过遵循本知识库的规范，AI策划可以生成高质量、完整、可执行的策划案，确保游戏至少达到《迷雾大陆》的水平。

**核心原则**:
1. **参考《迷雾大陆》**: 确保功能完整性和质量标准
2. **显性化隐性知识**: 补充游戏设计的常识、惯例、经验
3. **拆分策划案**: 将策划案拆分为主策划案、UI策划案、数值策划案
4. **补充UI效果图**: UI策划案必须包含大量UI效果图和交互图

**持续迭代**: 本知识库会随着项目的进展持续迭代和完善，确保AI策划始终能够生成高质量的策划案。
